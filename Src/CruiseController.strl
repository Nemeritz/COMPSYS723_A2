% >>> CRUSECONTROLLER_STRL

% We define module interconnections here for ease of use in development.
% This also gives a high level overview of the whole system at a glance.

% CruiseManagement Sub-Module
module CruiseManagement:

input Resume;
input On;
input Off;
input QuickDecel;
input QuickAccel;
input Set;
input Speed : float;
input Accel : float;
input Brake : float;

output RegulateSpeed;
output UseAuto;
output CruiseState : integer;
output CruiseSpeed : float;

constant SpeedMin = 30.0f : float;
constant SpeedMax = 150.0f : float;
constant SpeedInc = 2.5f : float;
constant PedalsMin = 3.0f : float;

signal ManageCruiseSpeed, SpeedOk, BrakePressed, AccelPressed in
run CruiseState
||
run CruiseSpeedResolver
||
run PedalResolver
||
run SpeedLimiter
end signal

end module

% SpeedManagement Sub-Module
module SpeedManagement:

input RegulateSpeed;
input UseAuto;
input Accel : float;
input CruiseSpeed : float;
input Speed : float;

output ThrottleCmd : float;
output UsingAutoInThrottleResolver;

signal AutoThrottleCmd : float in
run AutoThrottle
||
run ThrottleResolver
end signal

end module

% CruiseController Global Module
module CruiseController:

input On;
input Off;
input Resume;
input Set;
input QuickDecel;
input QuickAccel;
input Brake : float;
input Accel : float;
input Speed : float;

output CruiseState : integer;
output ThrottleCmd : float;
output CruiseSpeed : float;
output UsingAutoInThrottleResolver;

constant SpeedMin = 30.0f : float;
constant SpeedMax = 150.0f : float;
constant SpeedInc = 2.5f : float;
constant PedalsMin = 3.0f : float;

signal RegulateSpeed, UseAuto in
run CruiseManagement
||
run SpeedManagement
end signal

end module

% >>> CRUSECONTROLLER_STRL_END
